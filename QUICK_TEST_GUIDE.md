# 快速测试指南

## 部署完成

✅ 新合约已部署到 Sepolia 测试网
- **地址**: `0x0699b2fFc94782D66808a472872ED8319e92A60d`
- **前端已自动更新**

## 测试前准备

### 1. 清除缓存
```bash
# 清除浏览器缓存
# Chrome: Ctrl+Shift+Delete (Windows) 或 Cmd+Shift+Delete (Mac)
# 或者在浏览器开发者工具中清除 Application > Cache Storage
```

### 2. 重启前端服务
```bash
cd frontend
npm run dev
```

### 3. 访问应用
```
http://localhost:5173/
```

## 测试流程

### 步骤 1: 连接钱包
- 点击"连接钱包"按钮
- 选择 MetaMask
- 确保网络是 Sepolia 测试网

### 步骤 2: 创建游戏
- 点击"创建游戏"
- 设置初始筹码（例如 1000）
- 记下游戏 ID

### 步骤 3: 加入游戏（用另一个账户）
- 用另一个钱包账户访问应用
- 连接钱包
- 输入游戏 ID 加入

### 步骤 4: 开始游戏
- 第一个账户（庄家）会看到"开始游戏"按钮
- 点击"开始游戏"
- 等待页面刷新

### 步骤 5: 测试加注
- 轮到你的回合时，点击"加注"
- 输入下注金额（例如 100）
- 观察结果

## 预期结果

### 成功情况
- ✅ 加注成功，页面显示"加注成功"
- ✅ 游戏状态更新
- ✅ 轮到下一个玩家

### 失败情况
- ❌ 显示清晰的错误信息，例如：
  - "合约错误: 加密金额无效 (0x9de3392c)"
  - "合约错误: 证明验证失败 (0x7567ae05)"
  - "合约错误: 不是你的回合 (0xe60c8f58)"

## 调试技巧

### 查看详细日志
1. 打开浏览器开发者工具 (F12)
2. 切换到 Console 标签
3. 查看所有日志信息

### 关键日志
```
📝 下注参数: {...}
🔍 合约地址: 0x0699b2fFc94782D66808a472872ED8319e92A60d
🔍 调用者地址: 0x...
❌ 下注失败: 合约错误: ...
🔍 解析错误: {...}
```

### 常见问题

**问题 1: "游戏还未开始"**
- 解决: 确保庄家点击了"开始游戏"按钮

**问题 2: "不是你的回合"**
- 解决: 等待轮到你的回合

**问题 3: "加密金额无效"**
- 解决: 检查输入的金额是否有效

**问题 4: "证明验证失败"**
- 解决: 这可能是 FHEVM 初始化问题，刷新页面重试

## 测试检查清单

- [ ] 连接钱包成功
- [ ] 创建游戏成功
- [ ] 加入游戏成功
- [ ] 开始游戏成功
- [ ] 过牌成功
- [ ] 跟注成功
- [ ] 加注成功
- [ ] 弃牌成功
- [ ] 错误信息清晰

## 报告问题

如果遇到问题，请提供：
1. 浏览器控制台的完整错误日志
2. 交易哈希（如果有）
3. 合约地址和用户地址
4. 具体的操作步骤

