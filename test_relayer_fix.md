# ğŸ”§ Relayerè¿æ¥é—®é¢˜ä¿®å¤æµ‹è¯•æŒ‡å—

## é—®é¢˜è¯Šæ–­ç»“æœ

### æ ¹æœ¬åŸå› 
1. **Relayer URLé…ç½®é”™è¯¯**: FHEVMç›´æ¥è®¿é—®å¤–éƒ¨URLè€Œä¸æ˜¯ä½¿ç”¨æœ¬åœ°ä»£ç†
2. **CORSå’ŒCloudflare WAFé˜»æ‹¦**: ç›´æ¥è®¿é—®è¢«é˜²ç«å¢™é˜»æ­¢
3. **SDKç‰ˆæœ¬ä¸åŒ¹é…**: CDNç‰ˆæœ¬ä¸Viteä»£ç†é…ç½®ä¸å…¼å®¹

### å·²åº”ç”¨çš„ä¿®å¤

#### âœ… ä¿®å¤1: æ›´æ–°Relayer URLé…ç½®
- **æ–‡ä»¶**: `frontend/src/lib/fhevm.ts` (ç¬¬86è¡Œ)
- **ä¿®æ”¹**: `relayerUrl: window.location.origin + '/relayer'`
- **æ•ˆæœ**: ä½¿ç”¨æœ¬åœ°ä»£ç†è€Œä¸æ˜¯ç›´æ¥è®¿é—®å¤–éƒ¨URL

#### âœ… ä¿®å¤2: æ”¹è¿›SDKåŠ è½½é€»è¾‘
- **æ–‡ä»¶**: `frontend/src/lib/fhevm.ts` (ç¬¬14-47è¡Œ)
- **ä¿®æ”¹**: ä¼˜å…ˆå°è¯•npmåŒ…ç‰ˆæœ¬ï¼Œå¤±è´¥æ—¶å›é€€åˆ°CDNç‰ˆæœ¬
- **æ•ˆæœ**: æä¾›æ›´å¥½çš„å…¼å®¹æ€§

#### âœ… ä¿®å¤3: æ³¨é‡ŠCDNè„šæœ¬
- **æ–‡ä»¶**: `frontend/index.html` (ç¬¬10è¡Œ)
- **ä¿®æ”¹**: å‡†å¤‡åˆ‡æ¢åˆ°npmåŒ…ç‰ˆæœ¬
- **æ•ˆæœ**: é¿å…ç‰ˆæœ¬å†²çª

## æµ‹è¯•æ­¥éª¤

### æ­¥éª¤1: å®‰è£…npmåŒ…ç‰ˆæœ¬ (å¯é€‰ä½†æ¨è)
```bash
cd frontend
npm install @zama-fhe/relayer-sdk
```

### æ­¥éª¤2: é‡å¯å‰ç«¯æœåŠ¡å™¨
```bash
# å®Œå…¨åœæ­¢å½“å‰æœåŠ¡å™¨ (Ctrl+C)
npm run dev
```

### æ­¥éª¤3: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
- æŒ‰ `Ctrl+Shift+Delete` (Windows) æˆ– `Cmd+Shift+Delete` (Mac)
- é€‰æ‹©"ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶"
- ç‚¹å‡»"æ¸…é™¤æ•°æ®"

### æ­¥éª¤4: æµ‹è¯•FHEVMåˆå§‹åŒ–
1. æ‰“å¼€ `http://localhost:5173/`
2. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
3. æŸ¥çœ‹Consoleæ ‡ç­¾

**é¢„æœŸæˆåŠŸæ—¥å¿—**:
```
ğŸ” åŠ è½½ npm ç‰ˆæœ¬çš„ Relayer SDK...
âœ… npm ç‰ˆæœ¬ Relayer SDK å·²åŠ è½½
ğŸ” æµè§ˆå™¨å…¼å®¹æ€§æ£€æŸ¥: { ... }
âœ… FHEVM initialized for chain: 11155111
```

**å¦‚æœçœ‹åˆ°å›é€€æ—¥å¿—**:
```
âš ï¸ npm ç‰ˆæœ¬ä¸å¯ç”¨ï¼Œå›é€€åˆ° CDN ç‰ˆæœ¬...
âœ… CDN ç‰ˆæœ¬ Relayer SDK å·²åŠ è½½
âœ… FHEVM initialized for chain: 11155111
```

### æ­¥éª¤5: æµ‹è¯•åŠ å…¥æ¸¸æˆåŠŸèƒ½
1. è¿æ¥é’±åŒ… (ç¡®ä¿åœ¨Sepoliaæµ‹è¯•ç½‘)
2. åˆ›å»ºæˆ–é€‰æ‹©ä¸€ä¸ªæ¸¸æˆæ¡Œ
3. ç‚¹å‡»"åŠ å…¥æ¸¸æˆ"
4. è¾“å…¥ä¹°å…¥é‡‘é¢ (å¦‚1000)
5. ç‚¹å‡»"ç¡®è®¤"

**é¢„æœŸæˆåŠŸæ—¥å¿—**:
```
ğŸ” å¼€å§‹åŠ å¯†ä¹°å…¥é‡‘é¢...
ğŸ” åŠ å¯†å®Œæˆ: { encryptedAmountLength: 32, inputProofLength: ... }
âœ… æˆåŠŸåŠ å…¥æ¸¸æˆï¼
```

## æ•…éšœæ’æŸ¥

### é—®é¢˜1: ä»ç„¶çœ‹åˆ°CORSé”™è¯¯
**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. å®Œå…¨é‡å¯å‰ç«¯
npm run dev

# 2. å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨
# æŒ‰ Ctrl+F5 (Windows) æˆ– Cmd+Shift+R (Mac)
```

### é—®é¢˜2: "Failed to resolve entry for package"
**è§£å†³æ–¹æ¡ˆ**:
```bash
# åˆ é™¤Viteç¼“å­˜
rm -rf node_modules/.vite
npm run dev
```

### é—®é¢˜3: ä»ç„¶å‡ºç°400é”™è¯¯
**æ£€æŸ¥ä»£ç†æ˜¯å¦å·¥ä½œ**:
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
fetch('http://localhost:5173/relayer/v1/keyurl')
  .then(r => {
    console.log('ä»£ç†çŠ¶æ€ç :', r.status);
    return r.text();
  })
  .then(t => console.log('ä»£ç†å“åº”:', t))
  .catch(e => console.log('ä»£ç†é”™è¯¯:', e))
```

### é—®é¢˜4: npmåŒ…å®‰è£…å¤±è´¥
**å›é€€åˆ°CDNç‰ˆæœ¬**:
1. æ¢å¤ `frontend/index.html` ä¸­çš„CDNè„šæœ¬
2. ä¿®æ”¹ `frontend/src/lib/fhevm.ts` ä¸­çš„loadSDKå‡½æ•°ç›´æ¥ä½¿ç”¨CDNç‰ˆæœ¬

## éªŒè¯æ¸…å•

- [ ] å‰ç«¯æœåŠ¡å™¨æ­£å¸¸å¯åŠ¨ (http://localhost:5173)
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ²¡æœ‰CORSé”™è¯¯
- [ ] FHEVMåˆå§‹åŒ–æˆåŠŸ (çœ‹åˆ°"âœ… FHEVM initialized"æ—¥å¿—)
- [ ] é’±åŒ…è¿æ¥æ­£å¸¸
- [ ] èƒ½å¤Ÿåˆ›å»ºæ¸¸æˆæ¡Œ
- [ ] èƒ½å¤ŸåŠ å…¥æ¸¸æˆ (ä¸å‡ºç°400é”™è¯¯)
- [ ] åŠ å¯†åŠŸèƒ½æ­£å¸¸å·¥ä½œ

## é¢„æœŸç»“æœ

ä¿®å¤åï¼ŒåŠ å…¥æ¸¸æˆæ—¶åº”è¯¥çœ‹åˆ°ï¼š
```
ğŸ” å¼€å§‹åŠ å¯†ä¹°å…¥é‡‘é¢...
ğŸ” åŠ å¯†å®Œæˆ: { ... }
âœ… æˆåŠŸåŠ å…¥æ¸¸æˆï¼
ğŸ® å³å°†è¿›å…¥æ¸¸æˆé¡µé¢ï¼ŒtableId: 0
```

è€Œä¸æ˜¯ï¼š
```
âŒ åŠ å…¥å¤±è´¥: Error: Relayer didn't response correctly. Bad status . Content: {"message":"Transaction rejected: \"Input request failed: Transaction failed: Transaction failed: Failed to check contract code: backend connection task has stopped\""}
```

## è”ç³»æ”¯æŒ

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼š
1. æ”¶é›†å®Œæ•´çš„æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—
2. æ£€æŸ¥ç½‘ç»œæ ‡ç­¾ä¸­çš„è¯·æ±‚è¯¦æƒ…
3. æŸ¥çœ‹Zamaç¤¾åŒºè®ºå›: https://community.zama.ai/
4. è”ç³»Zama Discord: https://discord.com/invite/zama
